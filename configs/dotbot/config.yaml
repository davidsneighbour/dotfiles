---
################################################################################
# Setup configuration for Dotbot
#
# @see https://github.com/anishathalye/dotbot for more info
################################################################################
- plugins:
    - modules/dotbot-plugins/crontab-dotbot/

- defaults:
    link:
      create: true
      relink: true
      force: true

- clean: ["~"]

- link:
    ~/.dotfiles: ""
    ~/.bin: "bin"

    # bashrc setup
    ~/.bash_logout: filesystem/.bash_logout
    ~/.bash_profile: filesystem/.bash_profile
    ~/.bashrc: filesystem/.bashrc
    ~/.config/starship.toml: filesystem/.config/starship.toml

    # system setup
    ~/.face.icon: configs/system/face.icon
    ~/.face: configs/system/face.icon
    ~/.config/conky: configs/system/conky
    ~/.config/user-dirs.dirs: filesystem/.config/user-dirs.dirs
    ~/Downloads/Paperless: /mnt/storage/Paperless/consume
    ~/.config/polybar: configs/system/polybar
    ~/.config/i3: configs/system/i3
    ~/.logs: logs

    # autostart
    ~/.config/autostart: configs/system/autostart/${HOSTNAME}

    # git setup
    ~/.gitignore: configs/system/git/global.gitignore
    ~/.gitmessage: configs/system/git/.gitmessage
    ~/.gitconfig: configs/system/git/.gitconfig
    ~/.git-templates: configs/system/git/.git-templates

    # folders in ~/.local/share
    ~/.local/share/applications: configs/system/share/applications

    # Dracula Theme
    ~/.config/gtk-3.0: configs/theme/gtk-3.0
    ~/.config/gtk-4.0: configs/theme/gtk-4.0
    ~/.themes/Dracula: configs/theme/Dracula
    ~/.config/assets: configs/theme/Dracula/assets
    ~/.config/gtk-4.0/gtk.css: configs/theme/Dracula/gtk-4.0/gtk.css
    ~/.config/gtk-4.0/gtk-dark.css: configs/theme/Dracula/gtk-4.0/gtk-dark.css

    # Tool configs
    ~/.config/fastfetch: configs/system/fastfetch
    ~/.local/share/vale: configs/system/vale
    ~/.config/vale: configs/system/vale
    ~/.config/github-label-manager: configs/system/git/github-label-manager

    # node configs
    ~/.ncurc.js: configs/system/npm/ncu.cjs
    ~/.nvm/default-packages: configs/system/npm/default-packages

    # qbittorrent
    ~/.config/qBittorrent/watched_folders.json: configs/system/bittorrent/qbittorrent-watched_folders.json
    ~/.config/qBittorrent/qBittorrent.con: configs/system/bittorrent/qbittorrent.conf
    ~/.config/qBittorrent/categories.json: configs/system/bittorrent/qbittorrent-categories.json

    ############################################################################
    # legacy, deprecated, rework
    ############################################################################
    # file links
    ############################################################################
    ~/.czrc: filesystem/.czrc
    ~/.editorconfig: filesystem/.editorconfig
    ~/.fehbg: filesystem/.fehbg
    ~/.fixpackrc: filesystem/.fixpackrc
    ~/.hidden: filesystem/.hidden
    ~/.nvmrc: filesystem/.nvmrc
    ~/.pam_environment: filesystem/.pam_environment
    ~/.profile: filesystem/.profile
    ~/.remarkrc.js: filesystem/.remarkrc.js
    ~/.remarkignore: filesystem/.remarkignore
    ~/.Xresources: filesystem/.Xresources
    ##################################################################
    # directory links
    ##################################################################
    ~/.config/BetterDiscord: filesystem/.config/BetterDiscord
    ~/.config/filezilla: filesystem/.config/filezilla
    ~/.config/fontconfig: filesystem/.config/fontconfig
    ~/.config/gh: filesystem/.config/gh
    ~/.config/inkscape: filesystem/.config/inkscape
    ~/.config/lsd: filesystem/.config/lsd
    ~/.config/jrnl: filesystem/.config/jrnl
    ~/.config/neofetch: filesystem/.config/neofetch
    ~/.config/qt5ct: filesystem/.config/qt5ct
    ~/.config/rofi: filesystem/.config/rofi
    ~/.config/sublime-merge: filesystem/.config/sublime-merge
    ~/.config/sublime-text: filesystem/.config/sublime-text
    ~/.config/tabtab: filesystem/.config/tabtab
    ~/.config/wlogout: filesystem/.config/wlogout
    ~/.icons: filesystem/.icons

# - shell:
#     # create autostart folder connection
#     - ln -f -s ${HOME}/.dotfiles/configs/system/autostart/${HOSTNAME} ${HOME}/.config/autostart

- crontab:
    - cron: 0 0 * * *
      command: ${HOME}/github.com/davidsneighbour/dotfiles/bashrc/helpers/update-npm.sh >> "$HOME/.logs/cron/job-$(date +\%Y\%m\%d-\%H\%M\%S).log" 2>&1
    - cron: 30 */4 * * *
      command: ${HOME}/github.com/davidsneighbour/dotfiles/bashrc/helpers/filespace-discord.sh >> "$HOME/.logs/cron/job-$(date +\%Y\%m\%d-\%H\%M\%S).log" 2>&1
    - cron: 0 6,12,18 * * *
      command: ${HOME}/github.com/davidsneighbour/lighthousing/cronjob.sh >> "$HOME/.logs/cron/job-$(date +\%Y\%m\%d-\%H\%M\%S).log" 2>&1
    - cron: "@reboot"
      command: ${HOME}/github.com/davidsneighbour/lighthousing/cronjob.sh >> "$HOME/.logs/cron/job-$(date +\%Y\%m\%d-\%H\%M\%S).log" 2>&1
    - cron: 0 * * * *
      command: ${HOME}/.bin/cronjobs/synch_downloads.sh
    - cron: 5 */6 * * *
      command: ${HOME}/.bin/cronjobs/git_updates.sh --config ${HOME}/.dotfiles/configs/system/repository_updates.toml --verbose >> "$HOME/.logs/cron/repo-update-$(date +\%Y\%m\%d-\%H\%M\%S).log" 2>&1
    - cron: "@reboot"
      command: ${HOME}/.bin/cronjobs/bash-history-backup.sh >> "$HOME/.logs/cron/job-$(date +\%Y\%m\%d-\%H\%M\%S).log" 2>&1
    - cron: 10 * * * *
      command: ${HOME}/.local/bin/msgvault sync >> ${HOME}/.logs/mail/msgvault-cron.log 2>&1
    - cron: "@reboot"
      command: ${HOME}/.local/bin/msgvault sync >> ${HOME}/.logs/mail/msgvault-cron.log 2>&1
